# 简介

这是二次开发要注意的事项。

# 数据库迁移工具

ORM使用的是Flask-SQLAlchemy。

数据库迁移工具使用的是alembic。

相关文档：

- alembic https://alembic.sqlalchemy.org/en/latest/autogenerate.html
- Flask-SQLAlchemy+alembic https://blog.csdn.net/aimill/article/details/82257688

1. 第一步，安装alembic：

```shell
pip install alembic
```

2. 进入项目文件夹，然后初始化数据库迁移仓库（项目文件夹自己决定，不过后面要导入db）：

```shell
alembic init alembic
```

3. 修改数据库迁移环境，适配到目前项目：

修改`alembic.ini`的`sqlalchemy.url`：

```python
sqlalchemy.url = mysql+pymysql://root:admin@localhost/flask_alembic_demo
```

修改`env.py`的`target_metadata`：

```python
from applications import db
target_metadata = db.Model.metadata
```

4. 修改ORM：

略。

5. 创建迁移：

```python
 alembic revision -m "Empty Init"
```

6. 更新最新迁移:

```python
alembic upgrade head
```

完成。